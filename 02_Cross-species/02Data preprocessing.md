# Step 1
Extract the first two columns, which correspond to the proteins, as well as the last two columns, which contain the e-values and scores, from the file generated by the homology comparison between the two species.
```python
import pandas as pd # 读取txt文件 
df = pd.read_csv("/home/liuhuiling/gene_protein/Bter_Dros/Dros_Bter_protein.txt", delimiter="\t", header=None) # 抽取前两列和后两列 
df_extracted = df.iloc[:, :2].copy() 
df_extracted[2] = df.iloc[:, -2] 
df_extracted[3] = df.iloc[:, -1] # 添加列名 
df_extracted.columns = ["Dros", "Bter", "E value", "score"] # 将结果保存为新的csv件 
df_extracted.to_csv("/home/liuhuiling/gene_protein/Bter_Dros/AM_Dros protein comparison.csv", index=False)
```
从GFF文件中提取基因和蛋白的对应信息
```R
#需要了解一下GFF的数据结构
gff_file <- "/home/liuhuiling/gene_protein/GFF/Apis_mellifera_genomic.gff"
# 定义函数从 GFF 文件中提取蛋白和基因的对应关系
parse_gff <- function(gff_file) {
  gene_protein_mapping <- list()
  # 读取 GFF 文件
  gff_data <- read.delim(gff_file, sep="\t", header=FALSE, stringsAsFactors=FALSE,col.names=c("seqname", "source", "feature", "start", "end", "score", "strand", "frame", "attributes"))#可以查一下GFF及其他文件的数据结构
  # 剔除注释行 
  gff_data <- gff_data[!startsWith(gff_data$seqname, "#"), ]
  # 筛选出 CDS 区域的行
  cds_rows <- gff_data[gff_data$feature %in% c("CDS", "gene"), ]
  # 提取基因和蛋白对应关系
  for (i in 1:nrow(cds_rows)) {
    attributes <- unlist(strsplit(cds_rows$attributes[i], ";"))
    gene_name <- NULL
    protein_name <- NULL
    
    for (attr in attributes) {
      if (startsWith(attr, "gene=")) {
        gene_name <- gsub("gene=", "", attr)
      } else if (startsWith(attr, "protein_id=")) {
        protein_name <- gsub("protein_id=", "", attr)
      }
    }
    
    if (!is.null(gene_name) && !is.null(protein_name)) {
      gene_protein_mapping[[protein_name]] <- gene_name
    }
  }
  
  return(gene_protein_mapping)
}

# 调用函数提取蛋白和基因的对应关系
gene_protein_mapping <- parse_gff(gff_file)

# 将蛋白和基因的对应关系整理成数据框并写入 CSV 文件
gene_protein_df <- data.frame(AM_Protein = names(gene_protein_mapping),AM_Gene = unlist(gene_protein_mapping))#注意修改_之前的信息
write.csv(gene_protein_df, "/home/liuhuiling/gene_protein/AM_protein_gene_mapping.csv", row.names=FALSE)
```
